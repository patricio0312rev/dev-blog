---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import BlogListPage from "@/views/BlogListPage";

const articles = await getCollection("articles", ({ data }) => !data.draft);
const sortedArticles = articles
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .map((article) => ({
    slug: article.slug,
    title: article.data.title,
    description: article.data.description,
    category: article.data.category,
    tags: article.data.tags,
    date: article.data.publishDate.toISOString(),
  }));
---

<BaseLayout
  title="Blog"
  description="Software development insights, tutorials, and occasional hot takes."
>
  <BlogListPage articles={sortedArticles} client:load />
</BaseLayout>
